{% extends "base.html" %}

{% block title %}ë‚´ MBTI í…ŒìŠ¤íŠ¸ - 360Me{% endblock %}

{% block head %}
<style>
    .question-card:focus-within {
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.35);
        border-color: rgba(59, 130, 246, 0.6);
    }

    .question-title {
        min-width: 0;
        overflow-wrap: anywhere;
        word-break: normal;
        line-height: 1.5;
    }

    .option-label {
        min-width: 0;
        overflow-wrap: anywhere;
        word-break: normal;
        line-height: 1.4;
    }

    .scale-option:focus-visible {
        outline: 3px solid rgba(59, 130, 246, 0.9);
        outline-offset: 4px;
    }
</style>
{% endblock %}

{% block content %}
{% set scale_options = [
    (1, "ì „í˜€ ê·¸ë ‡ì§€ ì•Šë‹¤"),
    (2, "ê·¸ë ‡ì§€ ì•Šì€ í¸"),
    (3, "ë³´í†µ"),
    (4, "ê·¸ëŸ° í¸"),
    (5, "ë§¤ìš° ê·¸ë ‡ë‹¤")
] %}

<div class="mx-auto max-w-4xl space-y-10">
    <section class="rounded-3xl bg-gradient-to-br from-indigo-600 via-sky-500 to-emerald-500 px-6 py-10 text-white">
        <div class="max-w-3xl space-y-4">
            <h1 class="text-3xl md:text-4xl font-bold">
                ğŸ§  ë‚´ MBTI ì„±ê²© ìœ í˜• í…ŒìŠ¤íŠ¸
            </h1>
            <p class="text-base md:text-lg text-white/90">
                ëŠë‚Œì— ê°€ê¹Œìš´ ìª½ì„ ì„ íƒí•´ ì£¼ì„¸ìš”. í‚¤ë³´ë“œë§Œìœ¼ë¡œë„ ì‘ë‹µí•  ìˆ˜ ìˆì–´ìš”.
                ì§ê´€ì— ì˜ì¡´í•´ ë¹ ë¥´ê²Œ ë‹µí•˜ê³ , ë¬¸í•­ ì‚¬ì´ì— ì˜¤ë˜ ë¨¸ë¬´ë¥´ì§€ ì•Šì•„ë„ ê´œì°®ìŠµë‹ˆë‹¤.
            </p>
            <div class="flex flex-wrap gap-3 text-sm text-white/80">
                <span class="inline-flex items-center rounded-full bg-white/20 px-3 py-1">24ë¬¸í•­ Â· ì•½ 5ë¶„</span>
                <span class="inline-flex items-center rounded-full bg-white/20 px-3 py-1">ë°©í–¥í‚¤Â·ìŠ¤í˜ì´ìŠ¤ë¡œ ì„ íƒ ê°€ëŠ¥</span>
                <span class="inline-flex items-center rounded-full bg-white/20 px-3 py-1">ì–¸ì œë“  ë‹¤ì‹œ ì‹œì‘ ê°€ëŠ¥</span>
            </div>
        </div>
    </section>

    <form method="POST" action="/mbti/self-result" class="space-y-8">
        <section class="rounded-2xl border border-slate-200 bg-white p-6 shadow-sm">
            <h2 class="text-xl font-semibold text-slate-900">ğŸ‘¤ ê°œì¸ í…ŒìŠ¤íŠ¸ ëª¨ë“œ</h2>
            <p class="mt-2 text-sm text-slate-600">
                ì‘ë‹µì€ ìµëª…ìœ¼ë¡œ ì €ì¥ë˜ë©°, 3ëª… ì´ìƒì´ í•¨ê»˜ ì°¸ì—¬í•  ë•Œê¹Œì§€ ìƒì„¸ ë¹„êµëŠ” ì ê²¨ ìˆì–´ìš”.
                ì§„í–‰ ìƒí™©ì€ ìë™ ì €ì¥ë˜ì§€ ì•Šìœ¼ë‹ˆ, ì ê¹ì˜ ì§‘ì¤‘ìœ¼ë¡œ í•œ ë²ˆì— ë§ˆì³ë³´ì„¸ìš”.
            </p>
            <div class="mt-5">
                <label for="owner_name" class="block text-sm font-medium text-slate-700">ì´ˆëŒ€ ë§í¬ì— í‘œì‹œí•  ë‚´ ì´ë¦„</label>
                <input id="owner_name" name="owner_name" maxlength="50" value="{{ request.query_params.get('owner_name', '') }}" class="mt-2 w-full rounded-xl border border-slate-200 px-4 py-3 text-base text-slate-900 shadow-sm focus-visible:ring-4 focus-visible:ring-indigo-200" placeholder="ì˜ˆ: ë¯¼ì§€">
                <p class="mt-2 text-xs text-slate-500">ë¹„ì›Œë‘ë©´ ê¸°ë³¸ ì´ë¦„(ê³µìœ ì)ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤.</p>
            </div>
        </section>

        <section class="rounded-2xl border border-indigo-100 bg-indigo-50 p-5 text-sm text-indigo-900">
            <p id="scale-guidance" class="leading-relaxed">
                1ì€ "ì „í˜€ ê·¸ë ‡ì§€ ì•Šë‹¤", 5ëŠ” "ë§¤ìš° ê·¸ë ‡ë‹¤"ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ë°©í–¥í‚¤ì™€ ìŠ¤í˜ì´ìŠ¤/ì—”í„°ë¡œ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            </p>
        </section>

        {% for question in questions %}
        {% set base_name = "q" ~ question.id %}
        <fieldset class="question-card rounded-2xl border border-slate-200 bg-white p-6 shadow-sm transition-colors" aria-describedby="scale-guidance">
            <legend class="text-lg font-semibold text-slate-900">
                <div class="flex items-start gap-3">
                    <span class="mt-1 inline-flex h-8 w-8 flex-none items-center justify-center rounded-full bg-indigo-600 text-sm font-bold text-white">{{ loop.index }}</span>
                    <span class="question-title flex-1 min-w-0">{{ question.question }}</span>
                </div>
            </legend>
            <div class="mt-5 grid gap-3 sm:grid-cols-2 lg:grid-cols-5" role="radiogroup">
                {% for value, label in scale_options %}
                {% set input_id = base_name ~ "-" ~ loop.index %}
                <label for="{{ input_id }}" class="scale-option flex items-center gap-3 rounded-xl border border-slate-200 px-4 py-3 text-sm font-medium text-slate-700 transition hover:border-indigo-400 hover:bg-indigo-50">
                    <input id="{{ input_id }}" type="radio" name="{{ base_name }}" value="{{ value }}" class="h-4 w-4 text-indigo-600" {% if loop.first %}required{% endif %}>
                        <span class="option-label flex-1 min-w-0">{{ label }}</span>
                    </label>
                {% endfor %}
            </div>
        </fieldset>
        {% endfor %}

        <div class="sticky bottom-6 z-10 flex justify-end">
            <button type="submit" class="inline-flex items-center gap-2 rounded-xl bg-indigo-600 px-6 py-3 text-base font-semibold text-white shadow-lg shadow-indigo-600/30 transition hover:-translate-y-0.5 hover:bg-indigo-700">
                ğŸš€ ê²°ê³¼ í™•ì¸í•˜ê¸°
            </button>
        </div>
    </form>
</div>
{% endblock %}
