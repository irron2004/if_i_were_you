{% extends "base.html" %}

{% block title %}ë‚´ MBTI ê²°ê³¼ - {{ mbti_type }} - 360Me{% endblock %}

{% block head %}
    {{ super() }}
    {% if robots_meta %}
    <meta name="robots" content="{{ robots_meta }}">
    {% endif %}
{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
    <div class="text-center mb-8">
        <h1 class="text-4xl font-bold text-gray-800 mb-4">
            ğŸ‰ ë‚´ MBTI ê²°ê³¼
        </h1>
        <p class="text-xl text-gray-600">
            ìê¸° í‰ê°€ í…ŒìŠ¤íŠ¸ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!
        </p>
    </div>

    <!-- MBTI Result Card -->
    <div class="bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg shadow-xl p-8 mb-8">
        <div class="text-center">
            <div class="text-8xl mb-4">ğŸ§ </div>
            <h2 class="text-5xl font-bold mb-2">{{ mbti_type }}</h2>
            <h3 class="text-2xl font-semibold mb-4">{{ result.title }}</h3>
            <p class="text-xl opacity-90">{{ result.description }}</p>
        </div>
    </div>

    <!-- Score Breakdown -->
    <div class="grid md:grid-cols-2 gap-8 mb-8">
        <div class="bg-white rounded-lg shadow-lg p-6">
            <h3 class="text-xl font-bold text-gray-800 mb-4">ì„±í–¥ ë¶„ì„</h3>
            <div class="space-y-4">
                <div>
                    <div class="flex justify-between mb-2">
                        <span class="font-semibold">ì™¸í–¥ì„± (E)</span>
                        <span class="text-blue-600">{{ scores.E }}%</span>
                    </div>
                    <div class="flex justify-between mb-2">
                        <span class="font-semibold">ë‚´í–¥ì„± (I)</span>
                        <span class="text-blue-600">{{ scores.I }}%</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2">
                        <div class="bg-blue-600 h-2 rounded-full" style="width: {{ scores.E }}%"></div>
                    </div>
                </div>

                <div>
                    <div class="flex justify-between mb-2">
                        <span class="font-semibold">ê°ê° (S)</span>
                        <span class="text-green-600">{{ scores.S }}%</span>
                    </div>
                    <div class="flex justify-between mb-2">
                        <span class="font-semibold">ì§ê´€ (N)</span>
                        <span class="text-green-600">{{ scores.N }}%</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2">
                        <div class="bg-green-600 h-2 rounded-full" style="width: {{ scores.S }}%"></div>
                    </div>
                </div>

                <div>
                    <div class="flex justify-between mb-2">
                        <span class="font-semibold">ì‚¬ê³  (T)</span>
                        <span class="text-purple-600">{{ scores.T }}%</span>
                    </div>
                    <div class="flex justify-between mb-2">
                        <span class="font-semibold">ê°ì • (F)</span>
                        <span class="text-purple-600">{{ scores.F }}%</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2">
                        <div class="bg-purple-600 h-2 rounded-full" style="width: {{ scores.T }}%"></div>
                    </div>
                </div>

                <div>
                    <div class="flex justify-between mb-2">
                        <span class="font-semibold">íŒë‹¨ (J)</span>
                        <span class="text-orange-600">{{ scores.J }}%</span>
                    </div>
                    <div class="flex justify-between mb-2">
                        <span class="font-semibold">ì¸ì‹ (P)</span>
                        <span class="text-orange-600">{{ scores.P }}%</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2">
                        <div class="bg-orange-600 h-2 rounded-full" style="width: {{ scores.J }}%"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-lg shadow-lg p-6">
            <h3 class="text-xl font-bold text-gray-800 mb-4">MBTI ìœ í˜• ì„¤ëª…</h3>
            <div class="space-y-4">
                <div>
                    <h4 class="font-semibold text-gray-800">{{ mbti_type[0] }} - {{ "ì™¸í–¥ì„±" if mbti_type[0] == "E" else "ë‚´í–¥ì„±" }}</h4>
                    <p class="text-sm text-gray-600">
                        {% if mbti_type[0] == "E" %}
                        í™œë°œí•˜ê³  ì‚¬êµì ì´ë©°, ë‹¤ë¥¸ ì‚¬ëŒë“¤ê³¼ì˜ ìƒí˜¸ì‘ìš©ì„ í†µí•´ ì—ë„ˆì§€ë¥¼ ì–»ìŠµë‹ˆë‹¤.
                        {% else %}
                        ì¡°ìš©í•˜ê³  ì‹ ì¤‘í•˜ë©°, í˜¼ìë§Œì˜ ì‹œê°„ì„ í†µí•´ ì—ë„ˆì§€ë¥¼ ì–»ìŠµë‹ˆë‹¤.
                        {% endif %}
                    </p>
                </div>

                <div>
                    <h4 class="font-semibold text-gray-800">{{ mbti_type[1] }} - {{ "ê°ê°" if mbti_type[1] == "S" else "ì§ê´€" }}</h4>
                    <p class="text-sm text-gray-600">
                        {% if mbti_type[1] == "S" %}
                        êµ¬ì²´ì ì´ê³  ì‹¤ìš©ì ì´ë©°, í˜„ì¬ì˜ ì‚¬ì‹¤ê³¼ ì„¸ë¶€ì‚¬í•­ì— ì§‘ì¤‘í•©ë‹ˆë‹¤.
                        {% else %}
                        ì°½ì˜ì ì´ê³  ë¯¸ë˜ì§€í–¥ì ì´ë©°, ê°€ëŠ¥ì„±ê³¼ íŒ¨í„´ì„ ì¶”êµ¬í•©ë‹ˆë‹¤.
                        {% endif %}
                    </p>
                </div>

                <div>
                    <h4 class="font-semibold text-gray-800">{{ mbti_type[2] }} - {{ "ì‚¬ê³ " if mbti_type[2] == "T" else "ê°ì •" }}</h4>
                    <p class="text-sm text-gray-600">
                        {% if mbti_type[2] == "T" %}
                        ë…¼ë¦¬ì ì´ê³  ê°ê´€ì ì´ë©°, ì›ì¹™ê³¼ ì¼ê´€ì„±ì„ ì¤‘ì‹œí•©ë‹ˆë‹¤.
                        {% else %}
                        ê³µê°ì ì´ê³  ì£¼ê´€ì ì´ë©°, ì¡°í™”ì™€ ê°€ì¹˜ë¥¼ ì¤‘ì‹œí•©ë‹ˆë‹¤.
                        {% endif %}
                    </p>
                </div>

                <div>
                    <h4 class="font-semibold text-gray-800">{{ mbti_type[3] }} - {{ "íŒë‹¨" if mbti_type[3] == "J" else "ì¸ì‹" }}</h4>
                    <p class="text-sm text-gray-600">
                        {% if mbti_type[3] == "J" %}
                        ì²´ê³„ì ì´ê³  ê³„íšì ì´ë©°, ê²°ì •ì„ ë‚´ë¦¬ê³  ë§ˆë¬´ë¦¬í•˜ëŠ” ê²ƒì„ ì„ í˜¸í•©ë‹ˆë‹¤.
                        {% else %}
                        ìœ ì—°í•˜ê³  ì ì‘ì ì´ë©°, ì„ íƒì§€ë¥¼ ì—´ì–´ë‘ê³  ìƒí™©ì— ë”°ë¼ ëŒ€ì‘í•©ë‹ˆë‹¤.
                        {% endif %}
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
        <h3 class="text-xl font-bold text-gray-800 mb-3">ì¹œêµ¬ì—ê²Œ ê²€ì‚¬ ìš”ì²­í•˜ê¸°</h3>
        <p class="text-sm text-gray-700 mb-2">ê³µìœ ì ì´ë¦„: <strong>{{ owner_name or 'ê³µìœ ì' }}</strong></p>
        <p class="text-sm text-gray-600 mb-4">ì•„ë˜ ë§í¬ë¥¼ ë³µì‚¬í•´ì„œ ê³µìœ í•˜ë©´, ìƒëŒ€ê°€ ê´€ê³„ë¥¼ ê³ ë¥´ê³  ë‚˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ MBTI ì¸ì‹ í‰ê°€ë¥¼ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
        <div class="flex flex-col gap-3 sm:flex-row">
            <input id="shareLinkFromSelf" type="text" readonly value="{{ invite_url }}" class="w-full rounded-lg border border-gray-300 px-4 py-3 text-sm text-gray-700">
            <button type="button" id="copyShareLinkBtn" class="bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-3 px-5 rounded-lg transition duration-300">
                ë§í¬ ë³µì‚¬
            </button>
        </div>
    </div>

    <!-- Action Buttons -->
    <div class="text-center space-y-4">
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <a href="/mbti/self-test" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg transition duration-300">
                ë‹¤ì‹œ í…ŒìŠ¤íŠ¸í•˜ê¸°
            </a>
            <a href="/mbti/friend-system" class="bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg transition duration-300">
                ì¹œêµ¬ í‰ê°€í•˜ê¸°
            </a>
            <a href="/mbti/types" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-6 rounded-lg transition duration-300">
                ëª¨ë“  MBTI ìœ í˜• ë³´ê¸°
            </a>
        </div>
        
        <div class="mt-8">
            <a href="/" class="text-gray-600 hover:text-gray-800 font-semibold transition duration-300">
                â† ë©”ì¸ í˜ì´ì§€ë¡œ ëŒì•„ê°€ê¸°
            </a>
        </div>
    </div>
</div>
<script>
document.addEventListener('DOMContentLoaded', function () {
    const input = document.getElementById('shareLinkFromSelf');
    const button = document.getElementById('copyShareLinkBtn');

    if (!input || !button) {
        return;
    }

    const setCopied = function () {
        const before = button.textContent;
        button.textContent = 'ë³µì‚¬ ì™„ë£Œ!';
        setTimeout(function () {
            button.textContent = before;
        }, 1800);
    };

    button.addEventListener('click', function () {
        const value = input.value || '';
        if (!value) {
            return;
        }
        if (navigator.clipboard && navigator.clipboard.writeText) {
            navigator.clipboard.writeText(value).then(setCopied).catch(function () {
                input.focus();
                input.select();
                if (document.execCommand('copy')) {
                    setCopied();
                }
            });
            return;
        }

        input.focus();
        input.select();
        if (document.execCommand('copy')) {
            setCopied();
        }
    });
});
</script>
{% endblock %} 
